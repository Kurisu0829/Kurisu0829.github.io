---
title: 实用数据库实践笔记
date: 2024-05-07 17:32:00 +0800
categories: [学习, 数据库]
tags: [数据库]
---

主要是这门课后面有个考试，想必能用得上。（决定重写，聚焦于操作而不是知识点，待更新）

## MySQL的导入和导出
1. **使用select into outfile导出**   
   先使用su在root用户下，启动mysql服务：service mysql start，再登录mysql：mysql -uroot -p123456  
   使用show databases;可以查看mysql下所有数据库，在这里use scott;使用先前导入的scott数据库    

   导出数据库例如：**select * from scott.emp into outfile '/data/mysql/emp.txt' fields terminated by ',' optionally enclosed by '"' lines terminated by '\n';**  
   在这里通过show variables like '%secure%'\G会发现文件安全性参数为空，vim /etc/my.cnf进行更改，在其中加入secure_file_priv=/data/mysql，service mysql restart重启服务，使用grant file on *.* to 'root'@'%';给权限，输入flush privileges;刷新即可解决。  
2. **使用LOAD DATA INFILE导入**  
   use hr;切换到hr数据库，创建表create table hr.emp like scott.emp;再导入数据**LOAD DATA INFILE '/data/mysql/emp.txt' INTO TABLE hr.emp FIELDS TERMINATED BY ',' ENCLOSED BY '"' LINES TERMINATED BY '\n';**

## 外部表
1. **创建外部表**  
   总体过程：
   * 产生外部表的定义  
   * 指定驱动类型和默认目录  
   * 指定访问参数（记录终结，字段终结，空字段）  
   * 指定字段顺序
   * 指定数据文件  
   创建外部表的一个示例：create table scott.ex1(empno int,deptno int,ename varchar(20)) ORGANIZATION EXTERNAL (type oracle_loader default directory expdp_dest access parameters (records delimited by newline fields terminated by ',' missing field values are null (empno,deptno,ename)) location('employees.dat'));  
2. **外部表卸载**  
   示例：create table scott.ex2(empno,ename,sal) ORGANIZATION EXTERNAL (type oracle_datapump default directory expdp_dest location('emp1.dat')) as select empno,ename,sal from scott.emp;
3. **外部表加载**  
   示例：create table scott.ex(empno int,ename varchar(20),sal number(7,2)) ORGANIZATION EXTERNAL (type oracle_datapump default directory expdp_dest location('emp1.dat'));